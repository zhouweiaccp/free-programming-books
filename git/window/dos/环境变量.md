关于路径问题
在执行批处理命令时，需要用到路径变量，这里先说明路径相关的变量参数

echo 当前盘符：%~d0
echo 当前盘符和路径：%~dp0
echo 当前批处理全路径：%~f0
echo 当前盘符和路径的短文件名格式：%~sdp0
echo 当前CMD默认目录：%cd%

当批处理使用管理员身份运行时，默认打开路径为：C:\Windows\System32，此时 %cd% 就不是输出批处理的路径。

临时环境变量
修改变量： set PATH=%Path%;%JAVA_HOME%\bin
含义：表示修改 PATH 的变量。 %PATH% 表示原有的配置，再其后面跟上字符 ;%JAVA_HOME%\bin 表示添加变量

添加变量： set "JAVA_HOME" %cd%

删除变量：set PATH="" ，设置为空即可

查看变量： echo %PATH%

永久环境变量
用户变量
添加变量： setx "JAVA_HOME" %cd% ，表示添加名为 JAVA_HOME 的变量， %cd% 表示当前运行路径

删除变量：setx "JAVA_HOME" ""

修改变量：setx "path" "%path%;%%JAVA_HOME%%\bin;" ，两个 %% 表示转义，输出一个 %

查看变量：echo %PATH%

系统变量
Windows Management Instrumentation Command-line（Windows管理规范命令行）

WMIC扩展WMI（Windows Management Instrumentation，Windows管理规范） ，提供了从命令行接口和批命令脚本执行系统管理的支持。在WMIC出现之前，如果要管理WMI系统，必须使用一些专门的WMI应用，例如SMS，或者使用WMI的脚本编程API，或者使用象CIM Studio之类的工具。如果不熟悉C++之类的编程语言或VBScript之类的脚本语言，或者不掌握WMI名称空间的基本知识，要用WMI管理系统是很困难的。WMIC改变了这种情况，为WMI名称空间提供了一个强大的、友好的命令行接口。

ENVIRONMENT - 系统环境设置管理

添加变量：
wmic ENVIRONMENT create name="JAVA_HOME",username="<system>",VariableValue="%~dp0"
表示添加名为 JAVA_HOME 的变量， %cd% 表示当前运行路径

删除变量：wmic ENVIRONMENT where "name='home'" delete ，删除名为home的变量

修改变量：
wmic ENVIRONMENT where "name='path' and username='<system>'" set VariableValue="%path%;%%JAVA_HOME%%\bin;" ，两个 %% 表示转义，输出一个 %

获取变量：wmic ENVIRONMENT where "name='path'" get UserName,VariableValue

Java环境变量配置批处理文件
将下面的代码复制到文本文件，改名文件名格式为 .bat ，将其放在JDK的安装目录下(注意不是JRE目录哦)，双击 运行即可

用户变量

setx "JAVA_HOME" %~dp0
setx "CLASS_PATH" ".;%%JAVA_HOME%%\lib\tools.jar;%%JAVA_HOME%%\lib\dt.jar;"
setx "path" "%path%;%%JAVA_HOME%%\bin;"
1
2
3
系统变量

@echo off
echo "删除原变量"
wmic ENVIRONMENT where "name='JAVA_HOME'" delete
wmic ENVIRONMENT where "name='CLASSPATH'" delete

echo "添加变量"
wmic ENVIRONMENT create name="JAVA_HOME",username="<system>",VariableValue="%~dp0"
wmic ENVIRONMENT create name="CLASS_PATH",username="<system>",VariableValue=".;%%JAVA_HOME%%\lib\tools.jar;%%JAVA_HOME%%\lib\dt.jar;"
wmic ENVIRONMENT where "name='path' and username='<system>'" set VariableValue="%path%;%%JAVA_HOME%%\bin;"
pause

原文链接：https://blog.csdn.net/the_liang/article/details/82818741
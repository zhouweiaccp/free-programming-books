## commandline
*[commandline] (https://github.com/commandlineparser/commandline)
* [CancellationTokenSource](https://github.com/dotnet/corefx/blob/release/2.2/src/System.Data.SqlClient/src/System/Data/SqlClient/SNI/SNITcpHandle.cs#L180)
* [SqlConnectionString](https://github.com/dotnet/corefx/blob/release/2.2/src/System.Data.SqlClient/src/System/Data/SqlClient/SqlConnectionString.cs#L35)



## tcp
- [beetleX是基于dotnet](git@github.com:IKende/BeetleX.git)beetleX是基于dotnet core实现的轻量级高性能的TCP通讯组件，使用方便、性能高效和安全可靠是组件设计的出发点！开发人员可以在Beetlx组件的支持下快带地构建高性能的TCP通讯服务程序，在安全通讯方面只需要简单地设置一下SSL信息即可实现可靠安全的SSL服务
- [DotNetty](https://github.com/Azure/DotNetty.git)
- [/cat.net.](https://github.com/dianping/cat.net.git)
- [Cowboy](https://github.com/gaochundong/Cowboy.git)Cowboy is a library for building sockets based services.
- [socket.core](https://github.com/fengma312/socket.core)
- [C#高性能TCP服务的多种实现方式](https://www.cnblogs.com/gaochundong/p/csharp_tcp_service_models.html)
- [](https://github.com/yswenli/SAEA)SAEA.Socket是一个高性能IOCP框架的 TCP，基于dotnet standard 2.0；Src中含有其应用测试场景，例如websocket、rpc、redis驱动、MVC WebAPI、轻量级消息服
- []()



## 示例
- [practical-aspnetcore](git@github.com:dodyg/practical-aspnetcore.git)  
  - [ASP.NET-Core---Intermediate](https://channel9.msdn.com/Series/ASP.NET-Core---Intermediate) 官网视频站点
  - [aspnetcore](https://gitter.im/DotNetStudyGroup/aspnetcore) 聊天
  - [dotnet-api-docs](https://github.com/dotnet/dotnet-api-docs).net语言所有类库示例
- [dotnet-developer-projects](https://github.com/microsoft/dotnet/blob/master/dotnet-developer-projects.md#messaging)NET Open Source Developer Projects
- [ews-managed-api](https://github.com/OfficeDev/ews-managed-api/blob/master/README.md)
   - [how-to-set-the-ews-service-url-by-using-the-ews-managed-api](https://docs.microsoft.com/en-us/exchange/client-developer/exchange-web-services/how-to-set-the-ews-service-url-by-using-the-ews-managed-api) https://computername.domain.contoso.com/EWS/Exchange.asmx
   - [Exchange-2013-101-Code](http://code.msdn.microsoft.com/Exchange-2013-101-Code-3c38582c)
- [csharpcodi](https://www.csharpcodi.com/vs2/2258/osharp/src/OSharp.Core/Logging/DatabaseLoggerAdapter.cs/) 示例代码
- [csharpcodi](https://www.csharpcodi.com/csharp-examples/System.IServiceProvider.GetService()/)  示例代码
- [Migrate from ASP.NET Core 2.2 to 3.0](https://docs.microsoft.com/en-us/aspnet/core/migration/22-to-30?view=aspnetcore-3.0&tabs=visual-studio) Migrate from ASP.NET Core 2.2 to 3.0
-[older.Admin.AntdVue](https://gitee.com/Coldairarrow/Colder.Admin.AntdVue)Web后台快速开发框架,.NETCore3.1+Ant Design Vue版本
-[Newbe.Claptrap](https://gitee.com/yks/Newbe.Claptrap)以事件溯源和Actor模式作为基本理论的一套服务端开发框架。于此之上，开发者可以更为简单的开发出“分布式”、“可水平扩展”、“可测试性高”的应用系统
-[](https://github.com/egametang/ET)ET是一个开源的游戏客户端（基于unity3d）服务端双端框架，服务端是使用C# .net core开发的分布式游戏服务端，其特点是开发效率高，性能强，双端共享逻辑代码，客户端服务端热更机制完善，同时支持可靠udp tcp websocket协议，支持服务端3D recast寻路等等
-[MoreLINQ] (https://github.com/morelinq/MoreLINQ)  linq 扩展方法lefjoin   totable 等
- [LRUCache](https://github.com/duyanming/Anno.LRUCache/blob/master/Anno.LRUCache/LRUCache.cs)
- [](https://archive.codeplex.com/?p=aspnet#Samples%2fNet4%2fCS%2fWebApi%2fHttpRangeRequestSample%2fReadMe.txt)We just shipped Visual Studio 2012, .NET 4.5, MVC 4, Web API and Web Pages 2. We are working on our next release and we are working to have a preview available at the Build conference and an RTM before the end of year. The following items are what we are tentatively targeting for this next relea  [](链接: https://pan.baidu.com/s/1ZBrJFQk3Pev_BTVysRxkyA 提取码: 34xu 复制这段内容后打开百度网盘手机App，操作更方便哦)
- [](https://github.com/tpeczek/Lib.Web.Mvc)helper classes for ASP.NET MVC such as strongly typed jqGrid helper, attribute and helper providing support for HTTP/2 Server Push with Cache Digest, attribute and helpers providing support for Content Security Policy Level 2, FileResult providing support for Range Requests, action result and helper providing support for XSL transformation and more.
- [html5_video_play_largefile](https://gitee.com/abccc123/html5_video_play_largefile/blob/master/README.md)  html5视频播放分段下载
- [AutofacDemo](https://github.com/das2017/14-AutofacDemo) AutofacDemo 配置文件示例 企业架构demo比较全
    - [Examples](https://github.com/autofac/Examples/)  autofac 应用 wcf mvc webapi  netcore的demo
- [CSharpFlink](git@gitee.com:wxzz/CSharpFlink.git) netcore5.0 数据计算 用上 DotNetty  Microsoft.CodeAnalysis.CSharp 
- [ipaddressrange](https://github.com/jsakamoto/ipaddressrange) This library allows you to parse range of IP address string such as "192.168.0.0/24" and "192.168.0.0/255.255.255.0" and "192.168.0.0-192.168.0.255", and can contains check. This library supports both IPv4 and IPv6.
- [ef](https://docs.microsoft.com/en-us/ef/core/get-started/overview/install) Entity Framework Overview 
- [NetEscapades.Extensions.Logging](https://github.com/andrewlock/NetEscapades.Extensions.Logging/tree/master/sample/NetCoreApp3)

## 常见问题

### 一般引起Cookie丢失的原因
1、Cookie的Domain设置不正确
2、Cookie超时
3、Cookie中含有一些非法字符，致使浏览器丢弃Cookie
4、程序源码可能有多处重复设置或取消Cookie

## MSBuild.exe
"C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\MSBuild\Current\Bin\MSBuild.exe" MyAPI.sln -p:Configuration=Release
"C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\MSBuild\Current\Bin\MSBuild.exe" MyAPI.sln -p:Configuration=Debug

## An operation on a socket could not be performed because the system lacked sufficient buffer space
由于系统缺少足够的缓冲区空间或队列已满，无法对套接字执行操作  netstat -a
解决方法：增加端口数量 或者减少CLOSE_WAIT等待时间
打开注册表：HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters

建一个DWORD项，名字为MaxUserPort，值为十进制65534（十六进制0000FFFE），表示最大可用端口为65534

建一个DWORD项，名字为TCPTimedWaitDelay，值为十进制30（十六进制0000001e），表示TCP连接等待时间30秒  ![link](https://blog.csdn.net/weixin_43866043/article/details/111152111)

## MySQL 8.0retrieval of the rsa public key is not enabled for insecure
 allowPublicKeyRetrieval=true
 allowPublicKeyRetrieval=true&useSSL=false
 ![link](https://mysqlconnector.net/connection-options/)

## X509Certificate
```cs
//https://github.com/StefH/OpenSSL-X509Certificate2-Provider  Parses OpenSSL public and private key components and returns a X509Certificate2 with RSA/RSACryptoServiceProvider
X509Certificate certificate = new X509Certificate(
        @"c:\mySrvKeystore", KEY_PASSWORD);

    public static bool ValidateCertificate(
        object sender,
        X509Certificate certificate,
        X509Chain chain,
        SslPolicyErrors errors)
    {
        if (errors == SslPolicyErrors.None)
            return true;

        Console.WriteLine("Certificate error: {0}", errors);
        return false;
    }
```

## C#编码转换
```cs
public static string gb2312_utf8(string text)
{
//声明字符集
System.Text.Encoding utf8, gb2312;
//gb2312
gb2312 = System.Text.Encoding.GetEncoding("gb2312");
//utf8
utf8 = System.Text.Encoding.GetEncoding("utf-8");
byte[] gb;
gb = gb2312.GetBytes(text);
gb = System.Text.Encoding.Convert(gb2312, utf8, gb);
//返回转换后的字符
return utf8.GetString(gb);
}
```


## 一些关于SqlLocalDB的参考资料
百度网盘下载：https://pan.baidu.com/s/12uKJ7IEE_45P0chOI4b39w
https://docs.microsoft.com/zh-cn/sql/database-engine/configure-windows/sql-server-2016-express-localdb?view=sql-server-2017
https://docs.microsoft.com/zh-cn/sql/2014/relational-databases/express-localdb-instance-apis/command-line-management-tool-sqllocaldb-exe?view=sql-server-2017
https://docs.microsoft.com/zh-cn/sql/2014/tools/sqllocaldb-utility?view=sql-server-2017
https://technet.microsoft.com/zh-cn/hh510202(v=sql.105)


### Thread Theft
https://stackexchange.github.io/StackExchange.Redis/ThreadTheft.html
https://www.cnblogs.com/dudu/p/6251266.html  又踩.NET Core的坑：在同步方法中调用异步方法Wait时发生死锁(deadlock)
<add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
这告诉ASP.NET使用全新的异步管道，它遵循CLR约定来启动异步操作，包括在必要时将线程返回到ThreadPool。ASP.NET 4.0及其以下版本遵循自己的约定，违背了CLR原则，如果交换机未启用，则    异步方法非常容易同步运行，死锁请求或以其他方式不按预期运行。

### 捉拿真凶 StackExchange.Redis.Extensions 归案
- [](https://www.cnblogs.com/cmt/p/14008145.html)
https://github.com/cnblogs/StackExchange.Redis.Extensions/blob/a363a3edc995aa71d72f2671645054f7d97f9527/src/core/StackExchange.Redis.Extensions.Core/Implementations/RedisCacheConnectionPoolManager.cs
https://github.com/imperugo/StackExchange.Redis.Extensions/pull/356/files
``` csharp
private Task EmitConnection()
        {
            return Task.Run(
                async () =>
                {
                    this.logger.LogDebug("Creating new Redis connection.");
                    var multiplexer = await ConnectionMultiplexer.ConnectAsync(redisConfiguration.ConfigurationOptions);
                    if (this.redisConfiguration.ProfilingSessionProvider != null)
                        multiplexer.RegisterProfiler(this.redisConfiguration.ProfilingSessionProvider);
                    this.connections.Add(this.redisConfiguration.StateAwareConnectionFactory(multiplexer, logger));
                });
        }
```


## webconfig中配置编码
<globalization fileEncoding="utf-8" requestEncoding="utf-8" responseEncoding="gb2312"/>
    </system.web>
    <location path="weather.aspx">
      <system.web>
        <globalization  requestEncoding="gb2312" responseEncoding="gb2312"/>
      </system.web>
    </location>
  <location path="updatesoft.aspx">
    <system.web>
      <globalization  requestEncoding="gb2312" responseEncoding="gb2312"/>
    </system.web>
  </location>

### 短网址

 -[aspnetcore-url-shortener]()  ![aspnetcore-url-shortener](GenerateShortURL.cs)



### 关注改过的项目
- [TopsehelfService](git@gitee.com:abccc123/TopsehelfService.git) netframework  后台常用  技术栈 
      AutoMapper.4.1.1                        Nancy.Authentication.Forms.1.4.1
      Common.Logging.3.4.1                    Nancy.Authentication.Token.1.4.1
      Common.Logging.Core.3.4.1               Nancy.Hosting.Self.1.4.1
      Dapper.1.50.2                           Nancy.Viewengines.Razor.1.4.3
      Dapper.SimpleCRUD.ModelGenerator.1.0.3  Newtonsoft.Json.10.0.3
      EnyimMemcached.2.16.0                   NPOI.1.2.5
      log4net.2.0.8                           NVelocity.1.0.3
      Microsoft.AspNet.Razor.2.0.30506.0      Quartz.2.6.0
      Microsoft.Bcl.1.1.10                    RabbitMQ.Client.3.5.7
      Microsoft.Bcl.Build.1.0.21              SharpZipLib.0.86.0
      Nancy.1.4.4                             System.Data.SQLite.Core.1.0.105.2
      sqliteSugar.3.5.2.7
- [aspnetCore20](git@gitee.com:abccc123/aspnetCore20.git) 自己练手的 ，总结一些用法
- [quartznet]( git@github.com:zhouweiaccp/quartznet.git) 调度器用法
- [Prism](https://github.com/PrismLibrary/Prism)Prism is a framework for building loosely coupled, maintainable, and testable XAML applications in WPF, Xamarin Forms, Uno Platform and WinUI
 * [BenchmarkDotNet](https://github.com/dotnet/BenchmarkDotNet) - Powerful .NET library for benchmarking.
     * [getting-started](https://benchmarkdotnet.org/articles/guides/getting-started.html)
     * [Demo.BenchmarkDotNet](https://github.com/WilsonPan/Net.Demos/tree/master/Demo.BenchmarkDotNet)
     * [demo1](https://github.com/serilog/serilog/blob/998f33da0da35cb1b71a83a90b1b22937e6460f8/NuGet.config#L0-L1)
- [CompareFiles](https://github.com/wakuflair/MyBlogDemoCode/tree/master/CompareFiles) NET CORE下最快比较两个文件内容是否相同的方法 - 续
- [miniprofiler](https://miniprofiler.com/dotnet/AspDotNetCore)MiniProfiler helps you debug issues and optimize performance 测试code  ef
- [AutoMapper](https://github.com/AutoMapper/AutoMapper) - Convention-based object-object mapper in .NET.
- [Mapster](https://github.com/MapsterMapper/Mapster) 比 AutoMapper 还高性能的对象映射
- [furion](https://monksoul.gitee.io/furion/docs/appstartup) 脚手架 类似 vue-cli
- [.Net Core DevOps -免费用Azure四步实现自动化发布（CI/CD](https://www.cnblogs.com/zhaozhengyan/p/azure-devops-aliyun.html)
- [lin-cms-dotnetcore](https://github.com/luoyunchong/lin-cms-dotnetcore) practical CMS implemented by .NET 5 + FreeSql；前后端分离、Docker部署、OAtuh2授权登录、自动化部署DevOps、自动同步至Gitee、代码生成器、仿掘金专栏
- [Npoi](https://github.com/donnytian/Npoi.Mapper)
- [MediatrTutorial](https://github.com/MoienTajik/MediatrTutorial)A simple implementation of CQRS in ASP.NET Core using MediatR framework in .NET 5
- [LazyCache.cs](./LazyCache.cs)
- []()
- []()
- []()
- []()
- []()



### Bounded multiple producers multiple consumers queue
- [MPMCQueue.NET](https://github.com/alexandrnikitin/MPMCQueue.NET)
- [BeetleX.Dispatchs](git\net\Dispatchs\DispatchCenter.cs)
- [lock-free-algorithms](http://www.1024cores.net/home/lock-free-algorithms/queues)
      Depending on allowed number of producer and consumer threads:
  - Multi-producer/multi-consumer queues (MPMC)
  - Single-producer/multi-consumer queues (SPMC)
  - Multi-producer/single-consumer queues (MPSC)
  - Single-producer/single-consumer queues (SPSC)
  I hope this aspect is clear - for example, if you have only 1 producer and 1 consumer thread, you can use SPSC queue instead of more general MPMC queue, and as you may guess it will be significantly faster.
  Depending on underlying data structure:
  - Array-based
  - Linked-list-based
  - Hybrid
  Array-based queues are generally faster, however they are usually not strictly lockfree. The drawback is that they need to preallocate memory for the worst case. Linked-list queues grow dynamically, thus no need to preallocate any memory up-front. And hybrid queues (linked-list of small fixed-size arrays) try to combine advantages of both.
- [MpscArrayQueue](https://github.com/zhouweiaccp/DotNetty/blob/9e3a84189f149fe3aa149851a1f083f2333ace7c/src%2FDotNetty.Common%2FInternal%2FMpscArrayQueue.cs#L0-L1) A Multi-Producer-Single-Consumer queue 
   - [java JCTools](https://github.com/JCTools/JCTools)
- []()
- []()
- []()




## 区块链接技术
-[](https://github.com/blockchainGuide/blockchainguide)
## C#中ToString()格式详解
C	货币	2.5.ToString("C")	￥2.50
D	十进制数	25.ToString("D5")	00025
E	科学型	25000.ToString("E")	2.500000E+005
F	固定点	25.ToString("F2")	25.00
G	常规	2.5.ToString("G")	2.5
N	数字	2500000.ToString("N")	2,500,000.00
X	十六进制	255.ToString("X")	FF


###  system.net.networkInformation
```cs
//C# 取ip
 var networks=System.Net.NetworkInformation.NetworkInterface.GetAllNetworkInterfaces();
            foreach (var item in networks)
            {
                var ip = item.GetIPProperties().UnicastAddresses;

                if (item.GetIPProperties().GatewayAddresses.Count>0)
                {
                    _outputHelper.WriteLine("gat:"+item.GetIPProperties().GatewayAddresses.First().Address.ToString());
                    foreach (var ipitem in ip)
                    {
                        if (ipitem.Address.AddressFamily == System.Net.Sockets.AddressFamily.InterNetwork)
                        {
                          var ipadd = ipitem.Address.MapToIPv4().ToString()+",mark:"+ ipitem.IPv4Mask.ToString();
                           _outputHelper.WriteLine(string.Join(" ",ipadd));
                        }
                    }
                }
            }

NetworkInterface[] nics = NetworkInterface.GetAllNetworkInterfaces();
foreach (NetworkInterface adapter in nics)
{
      if (adapter.NetworkInterfaceType.ToString().Equals("Ethernet"))
     {
           // adapter.Name;    //网卡适配名称：“本地连接”
          //  adapter.Description;  //适配器描述信息
            IPInterfaceProperties ip = adapter.GetIPProperties();     //IP配置信息
            if (ip.UnicastAddresses.Count > 0)
            {
                  ip.UnicastAddresses[0].Address.ToString();  //IP地址
                    ip.UnicastAddresses[0].Address.MapToIPV4().ToString();
                  ip.UnicastAddresses[0].IPv4Mask.ToString(); //子网掩码
            }
            if (ip.GatewayAddresses.Count > 0)
                  ip.GatewayAddresses[0].Address.ToString();  //默认网关
            if (ip.DnsAddresses.Count > 0)
            {
                  ip.DnsAddresses[0].ToString();      //首选DNS服务器地址
                  if (ip.DnsAddresses.Count > 1)
                       ip.DnsAddresses[1].ToString(); //备用DNS服务器地址
            }
     }
}


/// <summary>
     /// 获取网络数据并更新到UI
     /// </summary>
     private void UpdateNetworkInterface()
     {
         NetworkInterface nic = nicArr[cboNetworkInterface.SelectedIndex];
 
         IPv4InterfaceStatistics interfaceStats = nic.GetIPv4Statistics();
 
         int bytesSentSpeed = (int)(interfaceStats.BytesSent - double.Parse(txtbBytesSent.Text)) / 1024;
         int bytesReceivedSpeed = (int)(interfaceStats.BytesReceived - double.Parse(txtbBytesReceived.Text)) / 1024;
 
         //更新控件
 
           txtbSpeed.Text = nic.Speed.ToString()  +"  "+nic.GetPhysicalAddress().ToString().Trim()+"  "+nic.NetworkInterfaceType.ToString().Trim();
         //  txtbInterfaceType.Text = nic.NetworkInterfaceType.ToString();
         //txtbSpeed.Text = nic.Speed.ToString();
         txtbBytesReceived.Text = interfaceStats.BytesReceived.ToString();
         txtbBytesSent.Text = interfaceStats.BytesSent.ToString();
         txtbSentSecond.Text = bytesSentSpeed.ToString() + " KB/s";
         txtbReceivedSecond.Text = bytesReceivedSpeed.ToString() + " KB/s";
 
     }
```


## C#计算含中文字符串的长度
```cs
 /// <summary>
        /// 获取实际占用长度
        /// </summary>
        /// <param name="str">字符串</param>
        /// <returns>真实长度</returns>
        static int GetStrLength(string str)
        {
            int strLength = 0;
            //中文字符正则
            Regex rx = new Regex("^[\u4e00-\u9fa5]$");
            //全角字符正则
            Regex rx1 = new Regex("^[\uFF00-\uFFFF]$");

            for (int i = 0; i < str.Length; i++)
            {
                if (rx.IsMatch(str[i].ToString()) || rx1.IsMatch(str[i].ToString()))
                {//如果为中文字符或全角字符，字符串长度加2
                    strLength += 2;
                }
                else
                {//否则加1
                    strLength += 1;
                }
            }

            return strLength;
        }
```

## C#using和using static 指令
```cs
using static System.Console;
WriteLine("Hey you!");
//https://docs.microsoft.com/zh-cn/dotnet/csharp/language-reference/keywords/using-static
```

### 编程之路 Dictionary 写法
```csharp
Dictionary<int, string> d = new Dictionary<int, string>() { { 1, "123" }, { 2, "aasdfaf" }, { 10, "wofjsjf" } };
//https://www.cjavapy.com/article/67/
1、C# 4.0中指定默认值的方法

class StudentName
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int ID { get; set; }
}
    Dictionary<int, StudentName> students = new Dictionary<int, StudentName>()
    {
        { 111, new StudentName {FirstName="Sachin", LastName="Karnik", ID=211}},
        { 112, new StudentName {FirstName="Dina", LastName="Salimzianova", ID=317}},
        { 113, new StudentName {FirstName="Andy", LastName="Ruth", ID=198}}
    };
//C# 4.0
Dictionary<string, string> myDict =
    new Dictionary<string, string> { { "key1", "value1" },
        { "key2", "value2" },
        { "key3", "value3" }
    };
Dictionary<string, List<string>> myDictList =
    new Dictionary<string, List<string>> { { "key1", new List<string> () { "value1" } },
        { "key2", new List<string> () { "value2" } },
        { "key3", new List<string> () { "value3" } }
    };



    2、C# 6.0中指定默认值的方法

class StudentName
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int ID { get; set; }
}
   Dictionary<int, StudentName> students = new Dictionary<int, StudentName> () {
                [111] = new StudentName { FirstName = "Sachin", LastName = "Karnik", ID = 211 }, 
                [112] = new StudentName { FirstName = "Dina", LastName = "Salimzianova", ID = 317 }, 
                [113] = new StudentName { FirstName = "Andy", LastName = "Ruth", ID = 198 }
            };
//C# 6.0
Dictionary<string, string> dic =
    new Dictionary<string, string> {
        ["key1"] = "value1",
        ["key2"] = "value2",
        ["key3"] = "value3"
    };
Dictionary<string, List<string>> dicList =
    new Dictionary<string, List<string>> {
        ["key1"] = new List<string> () { "value1" },
        ["key2"] = new List<string> () { "value2" },
        ["key3"] = new List<string> () { "value3" }
    };
```

### This request has been blocked because sensitive information could be disclosed to third party web sites
```cs
return Json(new { Result = "Success", Message = "Saved Successfully"},JsonRequestBehavior.AllowGet);
```
```javascript
//https://stackoverflow.com/questions/43248751/this-request-has-been-blocked-because-sensitive-information-could-be-disclosed-t
     $(document).ready(function () {
        $('#save').click(function () {
            send_email();
        });
    });
        function send_email() {
$.ajax({
    url: '/Questions/SendEmail',
    dataType: "json",
    type: "GET",
    contentType: 'application/json; charset=utf-8',
    async: false,
    processData: false,
    cache: false,
    delay: 15,
    success: function (result) {
                    alert("Email Forwarded")
    },
    error: function (xhr) {
        alert('error');
        }
    });
}

```